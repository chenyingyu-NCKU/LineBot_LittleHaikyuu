# Little Haikyuu 小排球

>Final Project for TOC Project 2022 
>
>Finish on December 25th, 2022
>
>A Line bot based on a finite state machine (FSM)

## 設計主旨
排球運動一直以來都非常受歡迎。在學校與企業中都不乏有投入排球的人。而排球訓練，除了日常練習外，其實也有諸多需要注意的地方。

例如：如何正確收操、體能菜單怎麼排、系隊吹裁忘記規則、想關注排球時事等等

以上都是一些較瑣碎的事情，需要個別查找實在過於麻煩。因此設計了一個 LineBot，提供一個能快速得到以上資訊的環境。

（其實排球訓練以及訓練外的需求因人而異，因此本作品可能有強烈的個人色彩。是由此 LineBot 設計者本人出發而展開的設計）

## 介紹
### 基本資訊
![](https://i.imgur.com/saELsZO.png)
![](https://i.imgur.com/IaW2JNx.png)

名稱：小排球（英文：Little Haikyuu）
麻煩掃 QRCode 加入好友呦～


>🔺 由於本 LineBot 使用 Selenium 進行爬取 YouTube 的作業，在部署上較為困難。加上 Heroku 現在需要付費等等原因⋯⋯
>
>本次實作將在本地操作。

```
ngrok http 8000
```
```
python3 app.py
```
### 使用技術
>BeautifulSoup 爬取一般網頁資訊（「比賽規則」的部分）
>
>Selenium 爬取 YouTube 個頻道的最新影片
>

### 功能
![](https://i.imgur.com/X8t3nVh.jpg)

加入好友後會看到歡迎訊息，在聊天室輸入「主選單」即可看到功能列表。

以下我們先介紹整體架構

### 整體架構

除了最一開始的輸入「主選單」的部分，使用者皆不需（打字很麻煩，當然如果喜歡打字也可以），只要依照指示按按鈕即可。

>關於排球 （介紹排球位置、規則）
>
>>球員站位與介紹（有一張站位圖，點選圖片就能看到該位置的球員介紹）
>>>MB 中間攔網手
>>>
>>>S 舉球員
>>>
>>>WS 主攻手
>>>
>>>OP 舉對、接應
>>>
>>>L 自由球員
>>>
>>比賽規則（使用 BeautifulSoup 爬取網頁）
>>
>>輪轉規則
>>
>體能與收操
>
>>球員體能訓練（文字框 塔巴塔還是 排球體能菜單）
>>
>>>塔巴塔（Tabata 的推薦菜單，影片連結，超酷音樂）
>>>
>>>排球體能菜單（基礎肌力、初級專項體能、進階專項體能）
>>>
>>收操很重要
>>>收操小科普（去「開始收操」）
>>>
>>>開始收操
>>>
>時事收集與媒體
>
>>排球比賽（使用 Selenium，YouTube爬蟲）
>>
>>>HOP Sports 各一個list 
>>>
>>>V.LEAGUE
>>>
>>>Volleyball World
>>>
>>排球推薦帳號（列表）

```
圖片由Pinterest、YouTube 封面、Google搜尋、Twitter 提供
版面配置的部分使用 Line Developer 提供的 Flex Message Simulator
```


## 實作截圖與講解
### 主選單
1. 剛加入好友會看到 Greeting Message
![](https://i.imgur.com/PX8TDCK.jpg)
---
2. 接著輸入「主選單」就會進入主選單
![](https://i.imgur.com/i6TDH2b.jpg)

### 關於排球
1. 點選「關於排球」會看到三個按鈕的選單
2. 點選「球員與介紹」。會出現一格簡單的提醒，以及一張可點選的站位表。點擊球員則會看到該位置得介紹（共有五個球員位置）（下方例子是點選了MB日向，出現「攔中」的介紹）
3. 可以選擇「認識其他球員」，會再次出現提醒及站位表。也可以回到主選單。

![](https://i.imgur.com/aykBWuG.jpg)

---
4. 於「關於排球」的三個按鈕點選「比賽規則」，將出現維基百科上的排球規則。之後藉由快速按鈕或只輸入「主選單」回到主選單

![](https://i.imgur.com/evPiRPl.png)
太長了（截掉中間）
![](https://i.imgur.com/xnuiEq4.png)

---

5. 於「關於排球」的三個按鈕點選「輪轉規則」，將出現輪轉示意圖及規則。之後藉由快速按鈕或只輸入「主選單」回到主選單

![](https://i.imgur.com/c1Qa2d4.jpg)

### 體能與收操
1. 於主選單點選「體能與收操」會看到兩個按鈕的選單
2. 「球員體能訓練」包含 「塔巴塔」 以及 「排球體能菜單」
3. 點選 tabata 將出現 影片連結（文字部分是作者個人推薦的菜單）、以及音樂檔案（會 load 一段時間，但放心會出來的～）

![](https://i.imgur.com/w7QtP6E.jpg)


下方是「排球體能菜單」（包含影片連結，文字部分是摘要）


![](https://i.imgur.com/YMqcamU.jpg)

4. 以上兩個功能皆可透過按鈕回到「主選單」

---

5. 於「體能與收操」點選「收操很重要」
6. 分別出現「收操小科普」及「開始收操」
7. 下圖例子點選「收操小科普」，最終也會導向「開始收操」
8. 最後藉由「開始收操」上的按鈕可以返回主選單

![](https://i.imgur.com/spUzmjK.jpg)

### 時事收集與媒體

1. 於主選單點選「時事收集與媒體」會看到兩個按鈕的選單
2. 點選「排球比賽」會看到三個有名的排球賽事
3. 任選一個，爬取該賽事 YouTube 官方頻道的最新影片（五個），推播給使用者
4. 可以選擇爬取其他比賽或回到主選單

![](https://i.imgur.com/dA6MsWV.jpg)

---

5. 於「時事收集與媒體」點選「排球推薦帳號」，會看到作者推薦的社群帳號。同樣能回到主選單。

![](https://i.imgur.com/vdAzahw.jpg)



## Finite State Machine
![fsm](./img/fsm.png)